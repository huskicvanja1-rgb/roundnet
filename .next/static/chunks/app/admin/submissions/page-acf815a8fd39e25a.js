(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{233:function(e,s,t){Promise.resolve().then(t.bind(t,8589))},8589:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return R}});var r=t(3827),a=t(4090),i=t(8670),n=t(6490),l=t(6578),d=t(1483),o=t(7841),c=t(9108),m=t(7805),u=t(6371),x=t(9769),f=t(3167),h=t(1367);function b(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,h.m6)((0,f.W)(s))}t(9079);let p=(0,x.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-14 rounded-md px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:n=!1,...l}=e,d=n?u.g7:"button";return(0,r.jsx)(d,{className:b(p({variant:a,size:i,className:t})),ref:s,...l})});j.displayName="Button";let g=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:b("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});g.displayName="Input";let N=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:b("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});N.displayName="Card";let v=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:b("flex flex-col space-y-1.5 p-6",t),...a})});v.displayName="CardHeader";let y=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:b("text-2xl font-semibold leading-none tracking-tight",t),...a})});y.displayName="CardTitle";let w=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:b("text-sm text-muted-foreground",t),...a})});w.displayName="CardDescription";let C=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:b("p-6 pt-0",t),...a})});C.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:b("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter";let E=(0,x.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",warning:"border-transparent bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",info:"border-transparent bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}},defaultVariants:{variant:"default"}});function k(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:b(E({variant:t}),s),...a})}let D={PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800"};function R(){let[e,s]=(0,a.useState)([]),[t,u]=(0,a.useState)(!0),[x,f]=(0,a.useState)("PENDING"),[h,b]=(0,a.useState)(""),[p,E]=(0,a.useState)(null),[R,S]=(0,a.useState)(null),[P,A]=(0,a.useState)(1),[L,T]=(0,a.useState)(0),Z=async()=>{u(!0);try{let e=new URLSearchParams({page:P.toString(),limit:"20"});"ALL"!==x&&e.set("status",x),h&&e.set("search",h);let t=await fetch("/api/admin/submissions?".concat(e)),r=await t.json();s(r.submissions||[]),T(r.total||0)}catch(e){console.error("Failed to fetch submissions:",e)}u(!1)};(0,a.useEffect)(()=>{Z()},[x,P]);let z=async e=>{S(e);try{(await fetch("/api/admin/submissions/".concat(e,"/approve"),{method:"POST"})).ok&&(s(s=>s.map(s=>s.id===e?{...s,status:"APPROVED"}:s)),E(null))}catch(e){console.error("Failed to approve:",e)}S(null)},O=async(e,t)=>{S(e);try{(await fetch("/api/admin/submissions/".concat(e,"/reject"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t})})).ok&&(s(s=>s.map(s=>s.id===e?{...s,status:"REJECTED"}:s)),E(null))}catch(e){console.error("Failed to reject:",e)}S(null)},I=Math.ceil(L/20);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Club Submissions"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Review and moderate club submissions from users"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(i.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(g,{placeholder:"Search submissions...",value:h,onChange:e=>b(e.target.value),className:"pl-10",onKeyDown:e=>"Enter"===e.key&&Z()})]}),(0,r.jsx)("div",{className:"flex gap-2",children:["ALL","PENDING","APPROVED","REJECTED"].map(e=>(0,r.jsx)(j,{variant:x===e?"default":"outline",size:"sm",onClick:()=>{f(e),A(1)},children:"ALL"===e?"All":e.charAt(0)+e.slice(1).toLowerCase()},e))})]}),(0,r.jsx)(N,{children:(0,r.jsx)(C,{className:"p-0",children:t?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===e.length?(0,r.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No submissions found"}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,r.jsx)("th",{className:"text-left p-4 font-medium",children:"Club Name"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium",children:"Location"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium",children:"Type"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium",children:"Submitted By"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium",children:"Date"}),(0,r.jsx)("th",{className:"text-left p-4 font-medium",children:"Status"}),(0,r.jsx)("th",{className:"text-right p-4 font-medium",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-muted/50",children:[(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)("span",{className:"font-medium",children:e.clubName})}),(0,r.jsxs)("td",{className:"p-4 text-muted-foreground",children:[e.city,", ",e.countryCode]}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)(k,{variant:"outline",children:e.clubType})}),(0,r.jsxs)("td",{className:"p-4 text-sm",children:[(0,r.jsx)("div",{children:e.submitterName}),(0,r.jsx)("div",{className:"text-muted-foreground",children:e.submitterEmail})]}),(0,r.jsx)("td",{className:"p-4 text-muted-foreground",children:new Date(e.submittedAt).toLocaleDateString()}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(D[e.status]),children:["PENDING"===e.status&&(0,r.jsx)(n.Z,{className:"h-3 w-3 mr-1"}),"APPROVED"===e.status&&(0,r.jsx)(l.Z,{className:"h-3 w-3 mr-1"}),"REJECTED"===e.status&&(0,r.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),e.status]})}),(0,r.jsx)("td",{className:"p-4 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(j,{variant:"ghost",size:"sm",onClick:()=>E(e),children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})}),"PENDING"===e.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-700",onClick:()=>z(e.id),disabled:R===e.id,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})}),(0,r.jsx)(j,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>O(e.id),disabled:R===e.id,children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})]})]})})]},e.id))})]})})})}),I>1&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",(P-1)*20+1,"-",Math.min(20*P,L)," of ",L]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(j,{variant:"outline",size:"sm",disabled:1===P,onClick:()=>A(e=>e-1),children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("span",{className:"text-sm",children:["Page ",P," of ",I]}),(0,r.jsx)(j,{variant:"outline",size:"sm",disabled:P===I,onClick:()=>A(e=>e+1),children:(0,r.jsx)(m.Z,{className:"h-4 w-4"})})]})]}),p&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(N,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(v,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y,{children:p.clubName}),(0,r.jsxs)(w,{children:["Submitted on ",new Date(p.submittedAt).toLocaleDateString()]})]}),(0,r.jsx)(k,{className:D[p.status],children:p.status})]})}),(0,r.jsxs)(C,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Location"}),(0,r.jsxs)("p",{children:[p.city,", ",p.countryCode]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Club Type"}),(0,r.jsx)("p",{children:p.clubType})]}),p.website&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Website"}),(0,r.jsx)("a",{href:p.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:p.website})]}),p.email&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Club Email"}),(0,r.jsx)("p",{children:p.email})]})]}),p.description&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Description"}),(0,r.jsx)("p",{className:"text-sm",children:p.description})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Submitter Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Name:"})," ",p.submitterName]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Email:"})," ",p.submitterEmail]}),p.submitterRole&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Role:"})," ",p.submitterRole]})]}),p.notes&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Notes:"}),(0,r.jsx)("p",{className:"mt-1 text-sm",children:p.notes})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,r.jsx)(j,{variant:"outline",onClick:()=>E(null),children:"Close"}),"PENDING"===p.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j,{variant:"destructive",onClick:()=>O(p.id),disabled:R===p.id,children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Reject"]}),(0,r.jsxs)(j,{onClick:()=>z(p.id),disabled:R===p.id,children:[(0,r.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]})]})]})})]})}}},function(e){e.O(0,[228,971,69,744],function(){return e(e.s=233)}),_N_E=e.O()}]);